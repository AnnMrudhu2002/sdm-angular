<div class="container mt-4">
  <h3 class="mb-4">Upload Documents</h3>

  <!-- Upload Row -->
  <form [formGroup]="uploadForm" class="row g-2 align-items-end mb-3">

    <!-- Document Type Dropdown -->
    <div class="col-auto">
      <label for="docTypeId" class="form-label fw-semibold visually-hidden">Document Type</label>
      <select id="docTypeId"
              class="form-select form-select-sm"
              formControlName="docTypeId"
              [ngClass]="{'border-danger': uploadForm.controls['docTypeId'].touched && uploadForm.controls['docTypeId'].invalid}">
        <option value="" disabled  selected>Select Document</option>
        <option *ngFor="let docType of docTypes" [value]="docType.id">
          {{ docType.name }}
        </option>
      </select>
    </div>
  
    <!-- Upload Button (next to dropdown) -->
    <div class="col-auto">
      <input id="fileInput" type="file" hidden
             (change)="onFileSelected($event)"
             accept=".pdf,.jpg,.jpeg,.png" />
      <button type="button" class="btn btn-sm btn-primary d-flex align-items-center"
              (click)="triggerFileInput()"
              [disabled]="!uploadForm.get('docTypeId')?.valid">
        <i class="bi bi-upload me-1"></i> Upload 
      </button>
    </div>
  
  </form>
  
  
  <!-- Uploaded Documents Table -->
  <div class="card shadow-sm">
    <div class="card-header " style="background-color: #eef1f6;">
      <h5 class="mb-0" >Uploaded Documents</h5>
    </div>
    <div class="card-body p-0">
      <table class="table table-striped mb-0">
        <thead class="table-light">
          <tr>
            <th>Sl. No</th>
            <th>Document Type</th>
            <th>Uploaded On</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let doc of uploadedDocs; let i = index">
            <td>{{ i + 1 }}</td>
            <td>{{ doc.documentTypeName }}</td>
            <td>{{ doc.uploadedOn | date: 'short' }}</td>
            <td>
              <!-- Download -->
              <button class="btn btn-sm btn-outline-success me-2" (click)="downloadFile(doc.documentId)">
                <i class="bi bi-download"></i>
              </button>
              <!-- Delete -->
              <button class="btn btn-sm btn-outline-danger" (click)="deleteFile(doc.documentId)">
                <i class="bi bi-trash"></i>
              </button>
            </td>
          </tr>
          <tr *ngIf="uploadedDocs.length === 0">
            <td colspan="4" class="text-center text-muted">No documents uploaded yet.</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>



<!-- Acknowledgment Checkbox -->
<div class="form-check mt-3">
  <input type="checkbox" class="form-check-input" id="acknowledge" formControlName="isAcknowledged">
  <label class="form-check-label" for="acknowledge">
    I acknowledge that all details and documents submitted are correct
  </label>
</div>

<!-- Submit Button -->
<button type="button" class="btn btn-success mt-3"
        [disabled]="!canSubmitAcknowledgment()"
        (click)="submitAcknowledgment()">
  Submit Acknowledgment
</button>
